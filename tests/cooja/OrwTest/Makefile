COMPONENT=OrwTestAppC

OPPXMAC_ROOT=../../orw-master/tinyos/tos/chips/cc2420

PFLAGS += -I$(OPPXMAC_ROOT) \
       -I$(OPPXMAC_ROOT)/csma \
       -I$(OPPXMAC_ROOT)/receive \
       -I$(OPPXMAC_ROOT)/transmit \
       -I$(OPPXMAC_ROOT)/interfaces \
       -I$(OPPXMAC_ROOT)/opp \
       -I$(OPPXMAC_ROOT)/opp/debug \
       -I$(OPPXMAC_ROOT)/unique \
       -I$(OPPXMAC_ROOT)/dc \
       -I$(OPPXMAC_ROOT)/lpl 

CFLAGS += -DTOSH_DATA_LENGTH=100
# Printf (comment to remove printf)
CFLAGS += -I$(TOSDIR)/lib/printf
CFLAGS += -DNEW_PRINTF_SEMANTICS
CFLAGS += -DPRINTF_COOJA_ENABLED			# FOR OSR
CFLAGS += -DPRINTF_BUFFER_SIZE=700

#DEFAULT_LOCAL_GROUP=0x23

CFLAGS+= -DLOW_POWER_LISTENING -DCC2420_NO_ADDRESS_RECOGNITION
CFLAGS+= -DDELAY_AFTER_RECEIVE=30
CFLAGS+= -DNO_OPP_DEBUG

#CFLAGS += -DOL_SINK=31


ifdef OL_CUSTOM_LPL
CFLAGS += -DLPL_DEF_LOCAL_WAKEUP=$(OL_CUSTOM_LPL)
CFLAGS += -DLPL_DEF_REMOTE_WAKEUP=$(OL_CUSTOM_LPL)
else
CFLAGS += -DLPL_DEF_LOCAL_WAKEUP=2048
CFLAGS += -DLPL_DEF_REMOTE_WAKEUP=2048
endif

ifdef OL_CUSTOM_PR
CFLAGS += -DTEST_NETWORK_PACKET_RATE=$(OL_CUSTOM_PR)
else
CFLAGS += -DTEST_NETWORK_PACKET_RATE=4096
endif

ifdef OL_CUSTOM_CH
CFLAGS += -DCC2420_DEF_CHANNEL=$(OL_CUSTOM_CH)
endif

ifdef OL_CUSTOM_W
CFLAGS += -DOPP_EDC_TX_PENALTY=$(OL_CUSTOM_W)
endif

ifdef OL_CUSTOM_TABLE_SIZE
CFLAGS += -DOPP_NB_TABLE_SIZE=$(OL_CUSTOM_TABLE_SIZE)
endif

ifdef OL_CUSTOM_ACK_WAIT
CFLAGS += -DOPP_ACK_WAIT=$(OL_CUSTOM_ACK_WAIT) -DDELAY_AFTER_RECEIVE=10
endif

ifdef OL_CHURN
CFLAGS += -DCHURN  
endif

### THIS PIECE OF CODE IS TOTALLY USELESS
#ifdef OL_SINK
#CFLAGS += -DSINK_ID=$(OL_SINK)
#endif

ifdef OL_CUSTOM_PW
CFLAGS += -DCC2420_DEF_RFPOWER=$(OL_CUSTOM_PW)
endif

#CFLAGS += -DENABLE_SPI0_DMA  
#CFLAGS += -DCC2420_DEF_RFPOWER=2


include $(MAKERULES)
